import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as p,o as i,c,b as s,d as n,e as l,a}from"./app-Cphw7wZ-.js";const o={},u=a(`<h1 id="fsys-path" tabindex="-1"><a class="header-anchor" href="#fsys-path"><span>fsys.path</span></a></h1><p>提供文件路径相关函数, 在导入fsys支持库时将自动导入fsys.path</p><h3 id="fsys-path-addbackslash-路径" tabindex="-1"><a class="header-anchor" href="#fsys-path-addbackslash-路径"><span>fsys.path.addBackslash(路径)</span></a></h3><p>首先替换所有正斜杠为反斜杠<br> 如果目录最后面没有反斜杠,则追加反斜杠,<br> 这个函数实际是调用 io.joinpath(path,&quot;/&quot;)</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">addBackslash</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">c:/</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>

<span class="token doc-comment comment">/**
 * 返回
[false, &#39;c:\\\\&#39;]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-canonicalize-路径-是否处理短路径" tabindex="-1"><a class="header-anchor" href="#fsys-path-canonicalize-路径-是否处理短路径"><span>fsys.path.canonicalize(路径, 是否处理短路径)</span></a></h3><p>转换为完整路径,<br> 并对路径进行归一化处理,参数2可选(默认为true),<br> 扩展和适当置换路径中包含的所有&quot;..&quot;和&quot;.&quot;<br> 该函数保证除分区根目录外保证尾部不为斜杠</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">canonicalize</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">C:/a/b/./c/../</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>

<span class="token doc-comment comment">/**
 * 返回
[false, &#39;C:\\\\a\\\\b&#39;]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-cmp-路径-比较路径" tabindex="-1"><a class="header-anchor" href="#fsys-path-cmp-路径-比较路径"><span>fsys.path.cmp(路径, 比较路径)</span></a></h3><p>比较两个路径是否指向同一位置, 任何一个参数为null时返回-1, 返回值意义与 string.cmp()函数相同, 路径相同则返回0,注意在条件表达式中为false</p><p>更准确的检测相同或不同的路径是否指向同一真实文件, 应使用fsys.fileInfo函数</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>path <span class="token operator">=</span> <span class="token string">&#39;C:/sys-shim-test/test-path-cmp&#39;</span>
path1 <span class="token operator">=</span> <span class="token string">&#39;C:/sys-shim-test/test-path-cmp/../test-path-cmp/&#39;</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span><span class="token function">createDir</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token comment">// 路径指向同一个</span>
<span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token punctuation">,</span> res1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">cmp</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> path1<span class="token punctuation">)</span>
<span class="token comment">// 路径指向不同位置</span>
<span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token punctuation">,</span> res2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">cmp</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/../</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span>res1<span class="token punctuation">,</span> res2<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// {res1: 0, res2: -1}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-commonprefix-路径-路径2" tabindex="-1"><a class="header-anchor" href="#fsys-path-commonprefix-路径-路径2"><span>fsys.path.commonPrefix(路径, 路径2)</span></a></h3><p>返回两个文件路径的公共前缀目录 该函数失败保证返回的是一个目录比以斜杠结尾,失败返回null, 在比较以前自动对路径归一化处理,忽略大小写</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token punctuation">,</span> res1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">commonPrefix</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">C:/sys-shim-test/test</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">C:/sys-shim-test/test2</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span>

<span class="token comment">// C:\\sys-shim-test\\</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-compact-文件路径-显示像素宽度" tabindex="-1"><a class="header-anchor" href="#fsys-path-compact-文件路径-显示像素宽度"><span><s>fsys.path.compact(文件路径, 显示像素宽度)</s></span></a></h3><p>截断路径来适合一定数目的像素</p><p>参考： https://learn.microsoft.com/en-us/windows/win32/api/shlwapi/nf-shlwapi-pathcompactpatha</p><h3 id="fsys-path-eofbackslash-文件路径" tabindex="-1"><a class="header-anchor" href="#fsys-path-eofbackslash-文件路径"><span>fsys.path.eofBackslash(文件路径)</span></a></h3><p>首先替换所有正斜杠为反斜杠 检测路径尾部是否有反斜杠</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">eofBackslash</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">C:/sys-shim-test/test/test1-1/</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, 30]
 */</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">eofBackslash</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">C:/sys-shim-test/test\\\\test1-1</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false]
 */</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">eofBackslash</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">C:/sys-shim-test/test\\\\test1-1\\\\</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, 30]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-full-path" tabindex="-1"><a class="header-anchor" href="#fsys-path-full-path"><span>fsys.path.full(path)</span></a></h3><p>如果路径是绝对路径则返回该路径（不作任何转换）, 否则返回null</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">full</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">C:/sys-shim-test/test/test1-1/</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;C:/sys-shim-test/test/test1-1/&#39;]
 */</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">full</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./src</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-full-path-root" tabindex="-1"><a class="header-anchor" href="#fsys-path-full-path-root"><span>fsys.path.full(path, root)</span></a></h3><p>如果path是相对路径，并且不以/、\\、~等字符开始, 则返回io.joinpath(root,path) 否则转换为绝对路径返回</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">full</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">./src</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span> <span class="token string">&quot;C:/test&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;C:\\\\test\\\\src&#39;]
 */</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">full</span><span class="token punctuation">(</span><span class="token string">&quot;F:/company-code/tmp/test/test1-1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C:/test&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;F:/company-code/tmp/test/test1-1&#39;]
 */</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">full</span><span class="token punctuation">(</span><span class="token string">&quot;./src&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;F:\\\\company-code\\\\sys-shim-core\\\\test\\\\src&#39;]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-isdir-路径" tabindex="-1"><a class="header-anchor" href="#fsys-path-isdir-路径"><span>fsys.path.isDir(路径)</span></a></h3><p>如果文件路径存在并且是一个目录, 或者路径路径以斜杠、反斜杠结束返回真</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>path <span class="token operator">=</span> <span class="token string">&quot;C:/sys-shim-test/test&quot;</span>
filenamepath <span class="token operator">=</span> <span class="token string">&quot;C:/sys-shim-test/test/test1.txt&quot;</span>
<span class="token comment">// 添加路径</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span><span class="token function">createDir</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token comment">// 判断文件</span>
<span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token punctuation">,</span> res1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">isDir</span><span class="token punctuation">(</span>filenamepath<span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, false]
 */</span>
<span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token punctuation">,</span> res2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">isDir</span><span class="token punctuation">(</span><span class="token string">&quot;C:/sys-shim-test/test/&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, true]
 */</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span>res1<span class="token punctuation">,</span> res2<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// {res1: false, res2: true}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-ischild-目录-路径" tabindex="-1"><a class="header-anchor" href="#fsys-path-ischild-目录-路径"><span>fsys.path.ischild(目录, 路径)</span></a></h3><p>检测参数@2指定的路径是否在参数@1指定的目录之下</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">ischild</span><span class="token punctuation">(</span><span class="token string">&quot;C:/sys-shim-test/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C:/sys-shim-test/test/&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, true]
 */</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">ischild</span><span class="token punctuation">(</span><span class="token string">&quot;C:/sys-shim-test/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/test/&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, false]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-long-路径" tabindex="-1"><a class="header-anchor" href="#fsys-path-long-路径"><span>fsys.path.long(路径)</span></a></h3><p>转为长路径</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">long</span><span class="token punctuation">(</span><span class="token string">&quot;./src&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;F:\\\\company-code\\\\sys-shim-core\\\\src&#39;]
 */</span>

path <span class="token operator">=</span> <span class="token string">&#39;C:/sys-shim-test/program files/&#39;</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span><span class="token function">createDir</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token comment">// 获取短路径</span>
<span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token punctuation">,</span>shortpath<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span><span class="token function">shortpath</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token comment">// 将短路径转为长路径</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">long</span><span class="token punctuation">(</span>shortpath<span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;C:\\\\sys-shim-test\\\\program files\\\\&#39;]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-relative-路径-目录-返回路径是否以斜杠开始" tabindex="-1"><a class="header-anchor" href="#fsys-path-relative-路径-目录-返回路径是否以斜杠开始"><span>fsys.path.relative(路径, 目录, 返回路径是否以斜杠开始)</span></a></h3><p>将路径转换为指定目录下层的相对路径, 在比较以前自动对路径归一化处理,忽略大小写 相同路径则返回空字符串,不是该目录下的路径则返回null 参数三可选,默认首字符为斜杠</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span><span class="token string">&quot;C:/sys-shim-test/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C:/sys-shim-test/&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;\\\\tmp\\\\&#39;]
 */</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span><span class="token string">&quot;C:/sys-shim-test/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C:/sys-shim-test/&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;tmp\\\\&#39;]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-relativeto-参考路径-目标路径-参考路径属性-目标路径属性" tabindex="-1"><a class="header-anchor" href="#fsys-path-relativeto-参考路径-目标路径-参考路径属性-目标路径属性"><span>fsys.path.relativeTo(参考路径, 目标路径, 参考路径属性, 目标路径属性)</span></a></h3><p>自参数@1指定的路径得到一个相对路径指向目标路径 注意相对路径不一定是子目录,如果是上层目录使用 ../ 表示 路径属性可为0,或 _FILE_ATTRIBUTE_DIRECTORY,可省略</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">relativeTo</span><span class="token punctuation">(</span><span class="token string">&quot;C:/sys-shim-test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C:/sys-shim-test/&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;..\\\\&#39;]
 */</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">relativeTo</span><span class="token punctuation">(</span><span class="token string">&quot;C:/sys-shim-test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C:/sys-shim-test/test&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;.\\\\test&#39;]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-removebackslash-路径" tabindex="-1"><a class="header-anchor" href="#fsys-path-removebackslash-路径"><span>fsys.path.removeBackslash(路径)</span></a></h3><p>首先转换为完整路径,替换所有正斜杠为反斜杠 移除路径最后面的反斜杠,并返回新路径以及尾字符 如果尾字符为反斜杠并已移除,第二个返回值为空字符 如果是分区号后的反斜杠或路径只有一个反斜杠,第二个返回值为反斜杠</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">removeBackslash</span><span class="token punctuation">(</span><span class="token string">&quot;C:/sys-shim-test/&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;C:/sys-shim-test&#39;]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-replacedir-路径-根目录-新的根目录" tabindex="-1"><a class="header-anchor" href="#fsys-path-replacedir-路径-根目录-新的根目录"><span>fsys.path.replaceDir(路径, 根目录, 新的根目录)</span></a></h3><p>将路径转换为参数2指定根目录下的相对路径 再将其转换为新的根目录下的绝对路径</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">replaceDir</span><span class="token punctuation">(</span><span class="token string">&quot;F:/sys-shim-test&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;F:/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;C:/&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;C:\\\\sys-shim-test\\\\tmp&#39;]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-replacefile-路径-新文件名" tabindex="-1"><a class="header-anchor" href="#fsys-path-replacefile-路径-新文件名"><span>fsys.path.replaceFile(路径, 新文件名)</span></a></h3><p>替换路径中的文件名部分</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">replaceFile</span><span class="token punctuation">(</span><span class="token string">&quot;C:/sys-shim-test/test/test1-1.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;test2-1.txt&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;C:\\\\sys-shim-test\\\\test\\\\test2-1.txt&#39;]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-short-路径" tabindex="-1"><a class="header-anchor" href="#fsys-path-short-路径"><span>fsys.path.short(路径)</span></a></h3><p>转为短路径 如果文件不存在,返回空值, 短文件名指向会因实际文件数变更,所以不能把短路径存入数据库</p><p>存在特定文件目录无法获取短路径且返回包含空格的长路径的可能性 如无必要，不建议使用或依赖此函数，正确使用 process 等可以自动 转义路径参数中的空格。</p>`,54),d={href:"https://zhidao.baidu.com/question/458582247.html",target:"_blank",rel:"noopener noreferrer"},r=a(`<div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>path <span class="token operator">=</span> <span class="token string">&#39;C:/sys-shim-test/program files/&#39;</span>

<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span><span class="token function">createDir</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">short</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;C:\\\\SYS-SH~1\\\\tmp\\\\PROGRA~1\\\\&#39;]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="fsys-path-validname-路径" tabindex="-1"><a class="header-anchor" href="#fsys-path-validname-路径"><span>fsys.path.validName(路径)</span></a></h3><p>检测文件名是否合法, 返回修正后的合法名称 传入非字符串参数直接返回空值</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">validName</span><span class="token punctuation">(</span><span class="token string">&quot;test.txt&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;test.txt&#39;]
 */</span>
<span class="token keyword">await</span> native<span class="token punctuation">.</span>fsys<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">validName</span><span class="token punctuation">(</span><span class="token string">&quot;test|test1.txt&quot;</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/**
 * 返回
 [false, &#39;testtest1.txt&#39;]
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4);function m(v,k){const t=p("ExternalLinkIcon");return i(),c("div",null,[u,s("p",null,[n("短路径与长路径的区别: "),s("a",d,[n("https://zhidao.baidu.com/question/458582247.html"),l(t)])]),r])}const y=e(o,[["render",m],["__file","fsys.path.html.vue"]]),b=JSON.parse('{"path":"/docs/api/fsys/fsys.path.html","title":"fsys.path","lang":"zh-CN","frontmatter":{"description":"fsys.path 提供文件路径相关函数, 在导入fsys支持库时将自动导入fsys.path fsys.path.addBackslash(路径) 首先替换所有正斜杠为反斜杠 如果目录最后面没有反斜杠,则追加反斜杠, 这个函数实际是调用 io.joinpath(path,\\"/\\") fsys.path.canonicalize(路径, 是否处理短路径)...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/sys-shim-doc/docs/api/fsys/fsys.path.html"}],["meta",{"property":"og:site_name","content":"sys-shim"}],["meta",{"property":"og:title","content":"fsys.path"}],["meta",{"property":"og:description","content":"fsys.path 提供文件路径相关函数, 在导入fsys支持库时将自动导入fsys.path fsys.path.addBackslash(路径) 首先替换所有正斜杠为反斜杠 如果目录最后面没有反斜杠,则追加反斜杠, 这个函数实际是调用 io.joinpath(path,\\"/\\") fsys.path.canonicalize(路径, 是否处理短路径)..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-22T04:15:32.000Z"}],["meta",{"property":"article:author","content":"wll8"}],["meta",{"property":"article:modified_time","content":"2024-03-22T04:15:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"fsys.path\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-22T04:15:32.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"wll8\\",\\"url\\":\\"https://github.com/wll8\\"}]}"]]},"headers":[{"level":3,"title":"fsys.path.addBackslash(路径)","slug":"fsys-path-addbackslash-路径","link":"#fsys-path-addbackslash-路径","children":[]},{"level":3,"title":"fsys.path.canonicalize(路径, 是否处理短路径)","slug":"fsys-path-canonicalize-路径-是否处理短路径","link":"#fsys-path-canonicalize-路径-是否处理短路径","children":[]},{"level":3,"title":"fsys.path.cmp(路径, 比较路径)","slug":"fsys-path-cmp-路径-比较路径","link":"#fsys-path-cmp-路径-比较路径","children":[]},{"level":3,"title":"fsys.path.commonPrefix(路径, 路径2)","slug":"fsys-path-commonprefix-路径-路径2","link":"#fsys-path-commonprefix-路径-路径2","children":[]},{"level":3,"title":"fsys.path.compact(文件路径, 显示像素宽度)","slug":"fsys-path-compact-文件路径-显示像素宽度","link":"#fsys-path-compact-文件路径-显示像素宽度","children":[]},{"level":3,"title":"fsys.path.eofBackslash(文件路径)","slug":"fsys-path-eofbackslash-文件路径","link":"#fsys-path-eofbackslash-文件路径","children":[]},{"level":3,"title":"fsys.path.full(path)","slug":"fsys-path-full-path","link":"#fsys-path-full-path","children":[]},{"level":3,"title":"fsys.path.full(path, root)","slug":"fsys-path-full-path-root","link":"#fsys-path-full-path-root","children":[]},{"level":3,"title":"fsys.path.isDir(路径)","slug":"fsys-path-isdir-路径","link":"#fsys-path-isdir-路径","children":[]},{"level":3,"title":"fsys.path.ischild(目录, 路径)","slug":"fsys-path-ischild-目录-路径","link":"#fsys-path-ischild-目录-路径","children":[]},{"level":3,"title":"fsys.path.long(路径)","slug":"fsys-path-long-路径","link":"#fsys-path-long-路径","children":[]},{"level":3,"title":"fsys.path.relative(路径, 目录, 返回路径是否以斜杠开始)","slug":"fsys-path-relative-路径-目录-返回路径是否以斜杠开始","link":"#fsys-path-relative-路径-目录-返回路径是否以斜杠开始","children":[]},{"level":3,"title":"fsys.path.relativeTo(参考路径, 目标路径, 参考路径属性, 目标路径属性)","slug":"fsys-path-relativeto-参考路径-目标路径-参考路径属性-目标路径属性","link":"#fsys-path-relativeto-参考路径-目标路径-参考路径属性-目标路径属性","children":[]},{"level":3,"title":"fsys.path.removeBackslash(路径)","slug":"fsys-path-removebackslash-路径","link":"#fsys-path-removebackslash-路径","children":[]},{"level":3,"title":"fsys.path.replaceDir(路径, 根目录, 新的根目录)","slug":"fsys-path-replacedir-路径-根目录-新的根目录","link":"#fsys-path-replacedir-路径-根目录-新的根目录","children":[]},{"level":3,"title":"fsys.path.replaceFile(路径, 新文件名)","slug":"fsys-path-replacefile-路径-新文件名","link":"#fsys-path-replacefile-路径-新文件名","children":[]},{"level":3,"title":"fsys.path.short(路径)","slug":"fsys-path-short-路径","link":"#fsys-path-short-路径","children":[]},{"level":3,"title":"fsys.path.validName(路径)","slug":"fsys-path-validname-路径","link":"#fsys-path-validname-路径","children":[]}],"git":{"createdTime":1711080932000,"updatedTime":1711080932000,"contributors":[{"name":"wll8","email":"xwdaysme@gmail.com","commits":1}]},"readingTime":{"minutes":5.11,"words":1534},"filePathRelative":"docs/api/fsys/fsys.path.md","localizedDate":"2024年3月22日","autoDesc":true}');export{y as comp,b as data};
